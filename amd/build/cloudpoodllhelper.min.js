define ("qtype_cloudpoodll/cloudpoodllhelper",["jquery","core/log","qtype_cloudpoodll/cloudpoodllloader"],function(a,b,c){"use strict";b.debug("cloudpoodll helper: initialising");return{configs:{},init:function init(b){var d={component:b.component,data_id:b.data_id,inputname:b.inputname,transcriber:b.transcriber,uploadstate:!1,safesave:b.safesave},e=CSS.escape(d.inputname);d.controls={nextpagebtn:a(".submitbtns .mod_quiz-next-nav"),mediaurl:a("input[name="+e+"mediaurl]"),transcript:a("input[name="+e+"transcript]"),answer:a("input[name="+e+"]")};this.configs[d.data_id]=d;var f=this,g="";c.init(d.data_id,function(a){var b=f.configs[a.id];if(!b){return}switch(a.type){case"recording":if("started"===a.action){g="";var c=new CustomEvent("cpquestionStarted",{details:a});document.dispatchEvent(c);if(1==b.safesave){b.controls.nextpagebtn.attr("disabled","disabled")}}break;case"speech":g+="  "+a.capturedspeech;b.controls.transcript.val(g);b.controls.answer.val(g);break;case"awaitingprocessing":if("posted"!=b.uploadstate){b.controls.mediaurl.val(a.mediaurl);b.controls.answer.val(a.mediaurl);var d=new CustomEvent("cpquestionUploaded",{details:a});document.dispatchEvent(d);if(1==b.safesave){b.controls.nextpagebtn.removeAttr("disabled","disabled")}}b.uploadstate="posted";break;case"error":alert("PROBLEM: "+a.message);break;}})},register_events:function register_events(){}}});
//# sourceMappingURL=cloudpoodllhelper.min.js.map
