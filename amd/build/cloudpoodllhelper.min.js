define ("qtype_cloudpoodll/cloudpoodllhelper",["jquery","core/log","qtype_cloudpoodll/cloudpoodllloader"],function(a,b,c){"use strict";b.debug("cloudpoodll helper: initialising");return{configs:{},init:function init(b){var d={component:b.component,data_id:b.data_id,inputname:b.inputname,transcriber:b.transcriber,uploadstate:!1},e=CSS.escape(d.inputname);d.controls={mediaurl:a("input[name="+e+"mediaurl]"),transcript:a("input[name="+e+"transcript]"),answer:a("input[name="+e+"]")};this.configs[d.data_id]=d;var f=this,g="";c.init(d.data_id,function(a){var b=f.configs[a.id];if(!b){return}switch(a.type){case"recording":if("started"===a.action){g="";var c=new CustomEvent("cpquestionStarted",{details:a});document.dispatchEvent(c)}break;case"speech":g+="  "+a.capturedspeech;b.controls.transcript.val(g);b.controls.answer.val(g);break;case"awaitingprocessing":if("posted"!=b.uploadstate){b.controls.mediaurl.val(a.mediaurl);b.controls.answer.val(a.mediaurl);var d=new CustomEvent("cpquestionUploaded",{details:a});document.dispatchEvent(d)}b.uploadstate="posted";break;case"error":alert("PROBLEM: "+a.message);break;}})},setup_recorder:function setup_recorder(a){var b="",d=function(c){switch(c.type){case"recording":if("started"===c.action){b=""}break;case"speech":b+="  "+c.capturedspeech;a.controls.transcript.val(b);a.controls.answer.val(b);break;case"awaitingprocessing":if("posted"!=a.uploadstate){a.controls.mediaurl.val(c.mediaurl);a.controls.answer.val(c.mediaurl)}a.uploadstate="posted";break;case"error":alert("PROBLEM: "+c.message);break;}},e=c.clone();e.init(a.data_id,d)},register_controls:function register_controls(b){var c=CSS.escape(b.inputname);b.controls={mediaurl:a("input[name="+c+"mediaurl]"),transcript:a("input[name="+c+"transcript]"),answer:a("input[name="+c+"]")};return b},register_events:function register_events(){}}});
//# sourceMappingURL=cloudpoodllhelper.min.js.map
